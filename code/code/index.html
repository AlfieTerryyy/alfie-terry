<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
    <link rel="stylesheet" href="https://alfieterry.co.uk/code/code/style.css">
    <script src="https://alfieterry.co.uk/code/code/main.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/htmlmixed/htmlmixed.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; }
        .editor-section { margin-bottom: 10px; }
        #fullscreen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 1000; }
        #fullscreen iframe { width: 100%; height: 90%; }
        #fullscreen .close { position: absolute; top: 10px; right: 10px; cursor: pointer; font-size: 24px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="editor-section">
            <h3>HTML</h3>
            <textarea id="html-code"></textarea>
        </div>
        <div class="editor-section">
            <h3>CSS</h3>
            <textarea id="css-code"></textarea>
        </div>
        <div class="editor-section">
            <h3>JavaScript</h3>
            <textarea id="js-code"></textarea>
        </div>
        <button id="run-button">Run</button>
        <a href="https://alfieterry.co.uk/code/code/index.txt" id="exit-full-mode"><strong>- Code -</strong></a>
    </div>

    <div class="fullscreen" id="fullscreen">
        <span class="close" id="fullscreen-close">Ã—</span>
        <iframe id="output"></iframe>
    </div>

    <script>
        // Initialize CodeMirror on the textareas
        const htmlEditor = CodeMirror.fromTextArea(document.getElementById('html-code'), {
            mode: "htmlmixed",
            lineNumbers: true,
            theme: "default"
        });

        const cssEditor = CodeMirror.fromTextArea(document.getElementById('css-code'), {
            mode: "css",
            lineNumbers: true,
            theme: "default"
        });

        const jsEditor = CodeMirror.fromTextArea(document.getElementById('js-code'), {
            mode: "javascript",
            lineNumbers: true,
            theme: "default"
        });

        // Function to run the code and display it in the iframe
        document.getElementById('run-button').addEventListener('click', function() {
            const htmlCode = htmlEditor.getValue();
            const cssCode = `<style>${cssEditor.getValue()}</style>`;
            const jsCode = `<script>${jsEditor.getValue()}<\/script>`;
            
            const outputCode = htmlCode + cssCode + jsCode;

            const iframe = document.getElementById('output');
            iframe.contentWindow.document.open();
            iframe.contentWindow.document.write(outputCode);
            iframe.contentWindow.document.close();

            // Show fullscreen
            document.getElementById('fullscreen').style.display = 'flex';
        });

        // Close fullscreen mode
        document.getElementById('fullscreen-close').addEventListener('click', function() {
            document.getElementById('fullscreen').style.display = 'none';
        });
    </script>
</body>
</html>
